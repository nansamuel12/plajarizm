// Xy.js - https://github.com/thunder9/xy.js
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Xy=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b,c){if(this["native"]=a,c){var d=Array.prototype.slice;for(var f in a){var g=a[f];"function"==typeof g&&!function(b,c){b[f]=function(){var b=d.call(arguments);return c.apply(a,b)}}(this,g)}}var h=b.x||e,i=b.y||e,j=b.width||e,k=b.height||e,l=b.radius||e;this.arc=function(b,c,d,e,f,g){a.arc(h(b),i(c),l(d),e,f,g)},this.arcTo=function(b,c,d,e,f){a.arcTo(h(b),i(c),h(d),i(e),l(f))},this.bezierCurveTo=function(b,c,d,e,f,g){a.bezierCurveTo(h(b),i(c),h(d),i(e),h(f),i(g))},this.clearRect=function(b,c,d,e){a.clearRect(h(b),i(c),j(d),k(e))},this.createImageData=function(b,c){return a.createImageData(j(b),k(c))},this.createLinearGradient=function(b,c,d,e){return a.createLinearGradient(h(b),i(c),h(d),i(e))},this.createRadialGradient=function(b,c,d,e,f,g){return a.createRadialGradient(h(b),i(c),l(d),h(e),i(f),l(g))},this.drawImage=function(b,c,d,e,f,g,l,m,n){3===arguments.length?a.drawImage(b,h(c),i(d)):5===arguments.length?a.drawImage(b,h(c),i(d),j(e),k(f)):a.drawImage(b,c,d,e,f,h(g),i(l),j(m),k(n))},this.fillRect=function(b,c,d,e){a.fillRect(h(b),i(c),j(d),k(e))},this.fillText=function(b,c,d,e){4===arguments.length?a.fillText(b,h(c),i(d),e):a.fillText(b,h(c),i(d))},this.getImageData=function(b,c,d,e){return a.getImageData(h(b),i(c),j(d),k(e))},this.isPointInPath=function(b,c){return a.isPointInPath(h(b),i(c))},this.lineTo=function(b,c){a.lineTo(h(b),i(c))},this.moveTo=function(b,c){a.moveTo(h(b),i(c))},this.putImageData=function(b,c,d,e,f,g,j){a.putImageData(b,h(c),i(d),e,f,g,j)},this.quadraticCurveTo=function(b,c,d,e){a.quadraticCurveTo(h(b),i(c),h(d),i(e))},this.rect=function(b,c,d,e){a.rect(h(b),i(c),j(d),k(e))},this.strokeRect=function(b,c,d,e){a.strokeRect(h(b),i(c),j(d),k(e))},this.strokeText=function(b,c,d,e){4===arguments.length?a.strokeText(b,h(c),i(d),e):a.strokeText(b,h(c),i(d))},this.translate=function(b,c){a.translate(h(b),i(c))}}var e=function(a){return a};b.exports=d},{}],2:[function(a,b,c){"use strict";function d(a,b){function c(a){for(var b in a)this[b]=a[b]}this.ctx=a,c.prototype=d.defaults,this.options=new c(b),this.width=this.options.width||a.canvas.width,this.height=this.options.height||a.canvas.height;var e=window.getComputedStyle(a.canvas);"auto"===e.width&&(a.canvas.style.width=this.width+"px"),"auto"===e.height&&(a.canvas.style.height=this.height+"px");var f=window.devicePixelRatio||1;a.canvas.width=this.width*f,a.canvas.height=this.height*f,a.scale(f,f)}function e(a){var b=this.ctx,c=this.options;b.font=c.labelFontStyle+" "+c.labelFontSize+"px '"+c.labelFontName+"'",this.ticksX=g(this,a),this.ticksY=h(this,a);var d=this.rangeX=[],e=this.rangeY=[];d[0]="auto"===c.rangeX[0]?this.ticksX[0]:+c.rangeX[0],d[1]="auto"===c.rangeX[1]?this.ticksX[Math.max(this.ticksX.length-1,0)]:+c.rangeX[1],e[0]="auto"===c.rangeY[0]?this.ticksY[0]:+c.rangeY[0],e[1]="auto"===c.rangeY[1]?this.ticksY[Math.max(this.ticksY.length-1,0)]:+c.rangeY[1];var i=c.pointCircleRadius+c.pointStrokeWidth/2,j=this.padding=Math.max(c.labelFontSize/2,i),k=this.width,l=this.height,m=this.labelSizeY=this.measureLabelSizeY(this.ticksY,c.labelFontSize),n=m.width+j,o=this.labelSizeX=this.measureLabelSizeX(this.ticksX,c.labelFontSize,k-n),q=o.height+j;n=Math.max(n,o.rot===Math.PI/4?o.width:o.width/2);var r=this.lengthX=d[1]-d[0],s=this.lengthY=e[1]-e[0],t=Math.max(j,o.rot===Math.PI/4?0:o.width/2),u=r>0?(k-n-t)/r:1,v=s>0?(l-q-j)/s:1;this.pointRadiusX=i/u,this.pointRadiusY=i/v,function(){function a(a,b){return(a*b-d[0])*u+n}function g(a,b){return(e[0]-a*b)*v+l-q}function h(a,b){return a*b*u}function i(a,b){return-a*b*v}b.xy=new p(b,{x:f(a)(1),y:f(g)(1)}),b.xywhr=new p(b,{x:f(a)(1),y:f(g)(1),width:f(h)(1),height:f(i)(1),radius:"y"===c.scalingRadius?f(i)(-1):f(h)(1)}),b.nxy=new p(b,{x:f(a)(r),y:f(g)(s)}),b.nxywhr=new p(b,{x:f(a)(r),y:f(g)(s),width:f(h)(r),height:f(i)(s),radius:"y"===c.scalingRadius?f(i)(-s):f(h)(r)})}()}function f(a){return function(b){return function(c){return a(c,b)}}}function g(a,b){var c=k({lower:a.options.rangeX[0],upper:a.options.rangeX[1],incr:a.options.tickStepX},b,0,function(b){var c=a.measureLabelSizeX(b,a.options.labelFontSize);return{offset:c.height,hop:c.width}},a.width);return i(c.lower,c.upper,c.incr,a.width)}function h(a,b){var c=k({lower:a.options.rangeY[0],upper:a.options.rangeY[1],incr:a.options.tickStepY},b,1,function(b){var c=a.measureLabelSizeY(b,a.options.labelFontSize);return{offset:c.width,hop:c.height}},a.height);return i(c.lower,c.upper,c.incr,a.height)}function i(a,b,c,d){var e,f=q.exec(c)[0],g=/e/.test(f)?-f.substring(1):/\./.test(f)?f.length-1:-f.length,h=[],i=0;for(a=c*Math.ceil(a/c);(e=j(a+i*c,g))<=b&&(d||1/0)>i;)h[i++]=e;return h}function j(a,b){var c=Math.abs(a)*Math.pow(10,b),d=1e21>c?c.toFixed().length:21;return+a.toPrecision(d)}function k(a,b,c,d,e){var f,g;if("auto"===a.lower||"auto"===a.upper){f=Number.MAX_VALUE,g=Number.MIN_VALUE;for(var h=0;h<b.length;h++)for(var j=b[h].data,k=0;k<j.length;k++)j[k][c]>g&&(g=j[k][c]),j[k][c]<f&&(f=j[k][c])}if("auto"!==a.lower&&(f=a.lower),"auto"!==a.upper&&(g=a.upper),"auto"===a.incr){a.incr=l(g-f,1);for(var m=2;e>m;m++){var n=l(g-f,m),o=d(i(f,g,n));if(e/(1.5*o.hop)<m)break;a.incr=n}}return"auto"===a.lower&&(a.lower=a.incr*Math.floor(f/a.incr)),"auto"===a.upper&&(a.upper=a.incr*Math.ceil(g/a.incr)),a}function l(a,b){for(var c=Math.floor(Math.log(a)*Math.LOG10E),d=0;a>0&&b>0;c--)for(var e=0;e<r.length;e++){var f=Math.pow(10,c)*r[e];if(a/f>b)return+d.toPrecision(1);d=f}return d}function m(a,b){var c,d=a.x-a.prev.prev.x,e=a.y-a.prev.prev.y,f=d*d+e*e,g=n(a,a.prev),h=n(a.prev,a.prev.prev);c=h>0?Math.sqrt(h/f)*b:Math.sqrt(g/f)*b,a.prev.cp2x=a.prev.x-d*c,a.prev.cp2y=a.prev.y-e*c,c=Math.sqrt(g/f)*b,a.cp1x=a.prev.x+d*c,a.cp1y=a.prev.y+e*c}function n(a,b){var c=a.x-b.x,d=a.y-b.y;return c*c+d*d}function o(a){for(var b,c,d=1,e=arguments.length;e>d;d++){b=arguments[d];for(c in b)s.call(b,c)&&(a[c]=b[c])}return a}var p=a("./transform");d.prototype.draw=function(a,b){var c=this.ctx,d=this.options;this.ticksX&&this.ticksY&&!b||e.call(this,a),c.clearRect(0,0,this.width,this.height),this.before(),d.grid&&(c.strokeStyle=d.gridColor,c.lineWidth=d.gridWidth,this.drawXGrids(this.ticksX,this.rangeY),this.drawYGrids(this.ticksY,this.rangeX)),d.scale&&(c.strokeStyle=d.scaleColor,c.lineWidth=d.scaleWidth,this.drawXScale(this.rangeX,this.ticksX,this.rangeY[0]),this.drawYScale(this.rangeY,this.ticksY,this.rangeX[0])),d.label&&(c.fillStyle=d.labelColor,c.save(),c.translate(0,this.padding),this.drawXLabels(this.ticksX,this.rangeY[0],this.labelSizeX.rot),c.restore(),c.save(),c.translate(-this.padding,0),this.drawYLabels(this.ticksY,this.rangeX[0]),c.restore()),c.save(),c.beginPath(),c.xywhr.rect(this.rangeX[0]-this.pointRadiusX,this.rangeY[0]-this.pointRadiusY,this.lengthX+2*this.pointRadiusX,this.lengthY+2*this.pointRadiusY),c.clip(),d.line&&(c.lineWidth=d.lineWidth,this.drawLines(a)),d.point&&(c.lineWidth=d.pointStrokeWidth,this.drawPoints(a)),this.plot(a),c.restore(),this.after()},d.prototype.measureLabelSizeX=function(a,b,c){for(var d=this.ctx,e=0,f=0;f<a.length;f++){var g=d.measureText(this.formatXLabel(a[f]));g.width>e&&(e=g.width)}var h={width:e,height:b,rot:0};if(!c)return h;var i=c/a.length;if(h.width>i){h.rot=Math.PI/4;var j=Math.cos(h.rot);h.width=e*j,h.height=h.width+b*j,h.width>i&&(h.rot=Math.PI/2,h.width=b,h.height=e)}return h},d.prototype.measureLabelSizeY=function(a,b){for(var c=this.ctx,d=1,e=0;e<a.length;e++){var f=c.measureText(this.formatYLabel(a[e]));f.width>d&&(d=f.width)}return{width:d,height:b}},d.prototype.drawXGrids=function(a,b){for(var c=this.ctx,d=0;d<a.length;d++)c.beginPath(),c.xy.moveTo(a[d],b[0]),c.xy.lineTo(a[d],b[1]),c.stroke()},d.prototype.drawYGrids=function(a,b){for(var c=this.ctx,d=0;d<a.length;d++)c.beginPath(),c.xy.moveTo(b[0],a[d]),c.xy.lineTo(b[1],a[d]),c.stroke()},d.prototype.drawXScale=function(a,b,c){var d=this.ctx;d.beginPath(),d.xy.moveTo(a[0],c),d.xy.lineTo(a[1],c),d.stroke()},d.prototype.drawYScale=function(a,b,c){var d=this.ctx;d.beginPath(),d.xy.moveTo(c,a[0]),d.xy.lineTo(c,a[1]),d.stroke()},d.prototype.drawXLabels=function(a,b,c){var d=this.ctx;if(0===c){d.textBaseline="top",d.textAlign="center";for(var e=0;e<a.length;e++)d.xy.fillText(this.formatXLabel(a[e]),a[e],b)}else{d.textBaseline="middle",d.textAlign="right",c===Math.PI/4&&d.translate(0,.3*this.options.labelFontSize);for(var e=0;e<a.length;e++)d.save(),d.xy.translate(a[e],b),d.rotate(-c),d.fillText(this.formatXLabel(a[e]),0,0),d.restore()}},d.prototype.drawYLabels=function(a,b){var c=this.ctx;c.textBaseline="middle",c.textAlign="right";for(var d=0;d<a.length;d++)c.xy.fillText(this.formatYLabel(a[d]),b,a[d])},d.prototype.formatXLabel=function(a){return a},d.prototype.formatYLabel=function(a){return a},d.prototype.drawLines=function(a){for(var b=this.ctx,c=this.options.smooth,d=this.rangeX[1]-this.rangeX[0],e=this.rangeY[1]-this.rangeY[0],f=0;f<a.length;f++){b.strokeStyle=a[f].lineColor;var g=a[f].data;if(b.beginPath(),g.length>0&&b.xy.moveTo(g[0][0],g[0][1]),c&&g.length>2){for(var h=null,i=[],j=0;j<g.length;j++){var k={x:g[j][0]/d,y:g[j][1]/e,prev:h};h=k,i[j]=h,h.prev&&h.prev.prev&&m(h,c)}for(var j=1;j<i.length;j++){var h=i[j];h.cp1x&&h.cp2x?b.nxy.bezierCurveTo(h.cp1x,h.cp1y,h.cp2x,h.cp2y,h.x,h.y):h.cp1x?b.nxy.quadraticCurveTo(h.cp1x,h.cp1y,h.x,h.y):b.nxy.quadraticCurveTo(h.cp2x,h.cp2y,h.x,h.y)}}else for(var j=1;j<g.length;j++)b.xy.lineTo(g[j][0],g[j][1]);b.stroke()}},d.prototype.drawPoints=function(a){for(var b=this.ctx,c=this.options.pointCircleRadius,d=0;d<a.length;d++){b.fillStyle=a[d].pointColor,b.strokeStyle=a[d].pointStrokeColor;for(var e=a[d].data,f=0;f<e.length;f++)b.beginPath(),b.xy.arc(e[f][0],e[f][1],c,0,2*Math.PI),b.fill(),b.stroke()}},d.prototype.plot=function(a){},d.prototype.before=function(){},d.prototype.after=function(){},d.prototype.hitTest=function(a,b,c){var d=this.ctx,e=this.options.pointCircleRadius,f=[];d.save();for(var g=0;g<a.length;g++)for(var h=a[g].data,i=0;i<h.length;i++)d.beginPath(),d.xy.arc(h[i][0],h[i][1],e,0,2*Math.PI),d.closePath(),d.isPointInPath(b,c)&&f.push({datapointIndex:g,dataIndex:i,data:h[i]});return d.restore(),f};var q=/0*$|\.\d*|e[+-]\d+/,r=[10,5,2],s={}.hasOwnProperty;d.extend=function(a,b){var c,d=this;c=a&&s.call(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},o(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&o(c.prototype,a),c.__super__=d.prototype,c},d.defaults={rangeX:["auto","auto"],rangeY:["auto","auto"],tickStepX:"auto",tickStepY:"auto",scale:!0,scaleColor:"rgba(0,0,0,.1)",scaleWidth:1,grid:!0,gridColor:"rgba(0,0,0,.05)",gridWidth:1,label:!0,labelFontName:"Arial",labelFontSize:20,labelFontStyle:"normal",labelColor:"#666",point:!0,pointCircleRadius:8,pointStrokeWidth:4,line:!0,lineWidth:4,smooth:.3,scalingRadius:"x"},b.exports=d},{"./transform":1}]},{},[2,1])(2)});